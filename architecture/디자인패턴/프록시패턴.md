# 프록시패턴

- 어떤 객체에 대한 접근을 제어하기 위한 용도로 대리인이나 대변인에 해당하는 객체를 제공하는 패턴
- 원격 프록시를 써서 원격 객체에 대한 접근을 제어할 수 있습니다.
- 가상 프록시(protection proxy)를 써서 접근 권한이 필요한 자원에 대한 접근을 제어할 수 있습니다.
- 보호 프록시(protection proxy)를 써서 접근 권한이 필요한 자원에 대한 접근을 제어할 수 있습니다.

## 원격 프록시

- 원격 프록시는 다른 JVM에 들어있는 객체의 대변인에 해당하는 로컬 객체입니다. 프록시의 메소드를 호출하면 그 호출이 네트워크를 통해서 전달되어 결국 원격 객체의 메소드가 호출 됩니다. 그리고 그 결과는 다시 프록시를 거쳐서 클라이언트한테 전달됩니다.

## 가상 프록시

- 가상 프록시는 생성하는 데 많은 비용이 드는 객체를 대신하는 역할을 맡습니다. 실제로 진짜 객체가 필요하게 되기 전까지 객체의 생성을 미루게 해주는 기능을 제공하기도 합니다. 객체 생성 전, 또는 객체 생성 도중에 객체를 대신하기도 하고요. 객체 생성이 완료되고 나면 그냥 RealSubject에 요청을 직접 전달해 줍니다.

## 데코레이터와 프록시의 차이

- 데코레이터 패턴 : 클래스에 새로운 행동을 추가하기 위한 용도
- 프록시 패턴 : 어떤 클래스에 대한 접근을 제어하기 위한 용도

## 캐싱 프록시

- 기존에 생성했던 객체들을 캐시에 저장해 뒀다가, 요청이 들어왔을 때 상황에 따라 캐시에 저장되어 있는 객체를 리턴할 수 있습니다.

## 어댑터와 프록시의 차이

- 공통점 : 클라이언트와 다른 객체 사이에 끼어들어서 클라이언트로부터 요청을 받아와서 다른 객체한테 전달해주는 역할
- 어댑터 패턴 : 다른 객체의 인터페이스를 바꿔준다.
- 프록시 패턴 : 똑같은 인터페이스를 사용한다.
- 보호 프록시 : 보호 프록시에서는 클라이언트의 역할에 따라서 객체에 있는 특정 메소드에 대한 클라이언트 접근을 제어합니다. 그러다 보니 보호 프록시에서는 클라이언트한테 인터페이스의 일부분만을 제공할 수 있습니다. 이런 점은 어댑터하고 비슷하다고 할 수 있습니다.

## 방화벽 프록시

- 일련의 네트워크 자원에 대한 접근을 제어함으로써 주 객체를 '나쁜' 클라이언트들로부터 보호해 줍니다.
- 서식지 : 기업용 방화벽 시스템에서 자주 목격됩니다.

## 스마트 레퍼런스 프록시(Smart Reference Proxy)

- 주 객체가 참조될 때마다 추가 행동을 제공합니다.
- 객체에 대한 레퍼런스 개수를 센다든가 하는 식으로 말이죠.

## 캐싱 프록시(Caching Proxy)

- 비용이 많이 드는 작업의 결과를 임시로 저장해 줍니다.
- 여러 클라이언트에서 결과를 공유하게 해 줌으로써 계산 시간 또는 네트워크 지연을 줄여주는 효과도 있습니다.
- 서식지 : 웹 서버 프록시 또는 컨텐츠 관리 및 퍼블리싱 시스템에서 종종 볼 수 있습니다.

## 동기화 프록시(Synchronization Proxy)

- 여러 스레드에서 주 객체에 접근하는 경우에 안전하게 작업을 처리할 수 있게 해 줍니다.
- 분산 환경에서 일련의 객체에 대한 동기화된 접근을 제어해주는 자바스페이스라는 데서 목격된 적이 있습니다.

## 복잡도 숨김 프록시(Complexity Hiding Proxy)

- 복잡한 클래스들의 집합에 대한 접근을 제어하고, 그 복잡도를 숨겨 줍니다. 퍼사드 프록시(Facade Proxy)라고 부르기도 합니다. 이 프록시와 퍼사드 패턴의 차이점은 프록시에서는 접근을 제어하지만 퍼사드 패턴에서는 대체 인터페이스만 제공한다는 점에서 찾을 수 있습니다.

## 지연 복사 프록시(Copy-On-Write Proxy)

- 클라이언트에서 필요로 할 때까지 객체가 복사되는 것을 지연시킴으로써 객체의 복사를 제어합니다.
- 변형된 가상 프록시라고 할 수 있습니다.

## 디자인 도구상자 안에 들어가야 할 도구들

### 객체지향 패턴

- 프록시 패턴 : 다른 객체를 대변하는 객체를 만들어서 주 객체에 접근을 제어할 수 있습니다.

### 핵심 정리

- 프록시 패턴을 이용하면 어떤 객체에 대한 대변인을 내세워서 클라이언트의 접근을 제어 할 수 있습니다. 접근을 관리하는 방법에는 여러 가지가 있습니다.
- 원격 프로시는 클라이언트와 원격 객체 사이의 데이터 전달을 관리해 줍니다.
- 가상 프록시는 인스턴스를 만드는 데 많은 비용이 드는 객체에 대한 접근을 제어합니다.
- 보호 프록시는 호출하는 쪽의 권한에 따라서 객체에 있는 메소드에 대한 접근을 제어합니다.
- 그 외에도 캐싱 프록시, 동기화 프록시, 방화벽 프록시, 지연 복사 프록시와 같이 다양한 변형된 프록시 패턴이 있습니다.
- 프록시 패턴의 구조는 데코레이터 패턴의 구조하고 비슷하지만 그 용도가 다르다는 차이점이 있습니다.
- 데코레이터 패턴에서는 객체에 행동을 추가하지마 프로식 패턴에서는 접근을 제어합니다.
- 자바에 내장된 프록시 클래스를 즉석에서 만들어서 원하는 핸들러에서 호출을 처리하도록 할 수 있습니다.
- 다른 래퍼를 쓸 때와 마찬가지로 프록시를 쓰면 디자인에 포함되는 클래스와 객체의 수가 늘어납니다.
