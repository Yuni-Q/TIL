# 12. 브라우저 탐지

## 사용자 에이전트 탐지

- 요즘에는 클라이언트에서 브라우저를 주로 탐지하지만, 초기에는 서버에서 사용자 에이전트 문자열을 이용하여 블라우저를 탐지했습니다. 당시에는 단지 사용자 에이전트 문자열을 기준으로 서버에서 특정 브라우저의 접속을 막아 사이트의 내용을 아예 보여주지 않았습니다.
- 자바스크립트의 인기가 높아지기 시작한 2005년에 서버에 전달되는 브라우저의 사용자 에이전트 문자열은 자바스크립트에서 navigator.userAgent를 통해 접근할 수 있습니다. 이때쯤부터 주로 서버에서 수행하던 사용자 에이전트 문자열 탐지가 웹 페이지의 자바스크립트로 넘어왔습니다.
- 자바스크립트와 서버에서 사용할 수 있게 잘 만들어진 라이브러리는 합리적인 메커니즘으로 사용자 에이전트를 탐지합니다. 하지만 꾸준히 업데이트 해야 합니다. 즉, 장기적인 관점에서 보면 사용자 에이전트 문자열을 사용한 탐지는 유지보수 면에서 좋지 않습니다.
- 사용자 에이전트 탐지는 자바스크립트의 올바른 동작을 위해 어쩔수 없이 선택하는 최후의 방법으로만 사용헤야 합니다.

## 기능 탐지

- 기능 탐지는 특정 브라우저의 기능이 있는지 확인하는 방법을 이용합니다.
- 기능 탐지는 어떤 브라우저를 사용하지에 상관없이 특정 기능을 사용할 수 있는지만 확인하는 방법이라 새로운 브라우저가 나와도 별 문제가 없습니다.
- 기능 탐지에서 중요한 세가지
  - 표준 솔류션을 확인한다.
  - 브라우저 기반 솔루션을 검사한다.
  - 기능 탐지에 실패하면 적절하게 처리한다.

## 기능 추론 금지

- 기능 탐지를 부적절하게 사용하면 기능 탐지가 아닌 기능 추론이 됩니다.
- 기능 추론은 어느 기능이 있는지 확인하고 그 외 다른 기능까지 사용하는 것을 말합니다. 한 가지 기능이 있으므로 다른 기능이 있으리라고 생각하는 겁니다. 당연히 추론은 사실보다는 추측에 기반을 두므로 유지보수에 문제가 생길 수 있습니다.

## 바루엊 추론 금지

- 많은 웹 개발자가 사용자 에이전트 탐지와 기능 탐지 간에 차이를 혼동합니다.

## 무엇을 사용해야 할까?

- 기능 추론과 브라우저 탐지는 매우 안 좋은 습관이고 반드시 피해야 합니다.
- 어떤 상황이든 가능 탐지를 사용하는 것이 가장 좋습니다. 일반적으로 어떤 기능을 사용하기 전에는 그 기능이 이미 있는지부터 알아야 합니다. 하지만 기능 간에 관계로 추측하면 잘못된 판단을 할 수 도 있습니다.
- 가능한 한 기능 탐지를 사용할 것을 권장합니다. 기능 탐지를 사용할 수 없을 때에는 대신 사용자 에이전트 탐지를 사용하십시오. 하지만 브라우저 추론은 유지보수에 좋지도 않고 브라우저가 새로 배포 될 때마다 업데이트해야 하므로 코드에서 벗어날 수 없게 될지도 모릅니다.
