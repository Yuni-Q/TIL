# 6. 전역 선언 방지

- 전역 변수와 전역 함수를 둘 다 가리킬 때는 전역이라고 하겠습니다.
- 자바스크립트는 처음 실행될 때 부터 다양한 전역 변수와 전역 함수가 선언됩니다.
- 선언된 전역은 필요할 때 마음대로 사용할 수 있습니다. 이 전역은 불가사의한 전역 객체에 선언되는데 이 객체의 프로퍼티가 됩니다.

## 전역의 문제점

- 특별한 경우가 아니라면 전역 선언은 하지 말아야 합니다.

### 이름 충돌 문제

- 모든 변수는 지역 변수로 선언해야 코드를 유지보수하기에 좋습니다.
- 전역 환경은 네이티브 자바스크립트 객체를 정의하는 곳이어서 우리가 멋대로 이름을 추가했다가는 나중에 브라우저에서 새로 추가하는 이름과 겹칠 수 도 있습니다.

### 변경에 취약한 문제

- 전역을 사용하는 함수는 변화에 취약해 환경이 바뀌면 함수 실행에 문제가 생길 수 있습니다.
- 함수를 정의할 때는 간으한 한 지역 변수를 사용해야 합니다. 함수 안에서 정의할 수 있는건 모두 지역 변수로 선언하고 함수 외부에서 선언된 데이터는 인자로 받아야 합니다. 이로써 주변 환경에서 함수를 독립시켜 한쪽을 변경해도 다른 쪽에 영향이 가지 않게 할 수 있습니다.

### 테스트하기 어려워지는 문제

- 전역 변수를 사용하는 함수를 제대로 테스트하려면 실제 전역 환경과 테스트 환경을 똑같이 맞춰야 합니다.
- 테스트를 고려해 볼 때 전역 변수가 없으면 실행되지 않는 코드는 작성하지 말아야 합니다.

## 실수에 의한 전역 선언

- var 문을 미리 선언하지 않으면 해당 변수는자동으로 전역 변수로 생성 됩니다.
- 가장 좋은 방법은 변수를 선언할 때 항상 var를 사용하는 것이고 전역으로 선언할 때도 var를 빠드리지 말아야 합니다.

### 실수를 방지하는 방법

- JSLint, JSJHint 사용
- strict 모드 사용

## One-Global 접근법

- 전역 변수를 최소한으로 사용하는 방법 중 가장 좋은 방법은 전역 객체를 딱 하나만 선언하는 방법입니다. 이를 One-Global 접근법dlfk gkrh gkskaks tjsdjsgks wjsdur rorcpfmf One-Global 객체라 하겠습니다.

### 네임스페이스

- One-Global 접근법만으로는 전액 객체 내부가 정리되지 않아 망가질 수도 있습니다.
- One-Global 접근법을 사용하는 프로젝트에서는 네임스페이스도 사용합니다.
- 네임스페이스란 전역 객체에 프로퍼티를 하나 추가해 기능을 논리적인 단위로 모아놓은 것입니다.
- 전역 객체가 하나인 상황에서 각 파일의 첫 줄에 namespace() 메서드로 네임스페이스를 정의하면 개발자는 네임스페이스가 존재하는지 혹은 덮어쓰지는 않을지에 대한 걱정 없이 마음 편히 개발할 수 있습니다.

### 모듈

- 모듈은 새로운 전액 객체나 네임스페이스 업이 일반적인 기능을 묶어서 사용하는 방법을 의미합니다.
- 대신 모든 코드는 함수 하나에서 실행되며 작업을 수행하거나 인터페이스를 만드는 역할을 합니다.
- 모듈은 이름 없이 사용할 수도 있고 실행할 때 다른 모듈이 필요하다면 피룡한 모듈 목록을 명시할 수도 있습니다.

## Zero-Global 접근법

- 전역 변수를 사용하지 않고 자바스크립트를 페이지에 넣는 방법도 있습니다.
- 이 방법은 사용할 수 있는 곳이 상당히 제한적이지만, 상황에 따라 굉장히 유용할 때도 있습니다. 특히 하나의 스크립트로만 도작하는 페이지에서 사용되는데 스크립트 파일 하나에 합쳐서 사용하거나, 스크립트가 작고 페이지에 영향을 주지 않을 때 주로 사용합니다.
- 다른 스크립트에서도 사용해야 하는 스크립트라면, One-Glrobal 접근법은 사용할 수 없고 실행 중에 확장하고 변경해야 하는 스크립트도 이 방법을 사용할 수 없습니다. 하지만 다른 스크립트와 작업이 필요 없을 정도로 스크립트가 작다면 유용 합니다.
