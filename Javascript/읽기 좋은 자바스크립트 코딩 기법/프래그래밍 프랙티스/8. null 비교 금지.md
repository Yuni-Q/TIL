# 8. null 비교 금지

- 변수에 필요한 값이 할당되었는지 확인할 때 null과 비교하는 방법은 흔히 잘못 사용하는 패턴입니다.
- 자바스크립트는 변수에 원하느 값이 할당되었는지를 확인하는 방법을 다양하게 제공합니다.

## 기본 데이터 타입 알아내기

- 자바스크립트에는 문자열, 숫자, 불린, null, undefined 총 5개의 기본 데이터 타입이 있습니다.
- 기대하는 값이 문자열, 숫자, 불린, null, undefined라면 typeof 연산자를 사용합니다.
  - 문자열 - string
  - 숫자 - number
  - 불린 - boolean
  - undefined - undefined

```javascript
// 두가지 모두 사용 가능하지만 함수로 보일 수 있기 때문에 위에 방법을 권장 합니다.
typeof variable;
// typeof(variable);
```

- typeof 연산자는 선언되지 않은 변수에 사용해도 에러가 발생하지 않습니다. 선언한 변수이든, 선언하지 않은 변수이든 값이 undefined이면 둘 다 undefined로 변환합니다.
- null은 변수에 값이 할당되었는지 확인할때 사용하면 안됩니다. 비교가 허용되는 예외는 기대하는 값이 정말 null이라면 직접 사용해도 됩니다. 여기서 null 값과 비교할 때는 반드시 비교 연산자로 === 또는 !==을 사용해야 합니다.
- typeof null을 실행하면 object를 반환합니다.

## 객체 참조 타입 알아내기

- 참조 값을 객체라고도 합니다.
- 자바스크립트에서 기본 데이터 타입이 아닌 모든 값은 참조 타입입니다.
- 참조 타입 중에는 Object, Array, Date, Error가 있습니다.
- typeof 연산자는 참조 값에는 거의 사용하지 않는데 그 이유는 어떤 타입의 객체든지 typeof 연산자를 사용하면 object라는 문자열만을 반환하기 때문입니다.
  - null도 object로 반환합니다.
- 참조 타입이 무엇인지 판단하려면 instanceof 연산자를 사용 합니다.

```javascript
값 instanceof 생성자명;
```

- instnaceof에서는 흥미롭게도 객체를 생성할 때 사용하는 생성자 뿐만 아니라 프로토타입 체인도 같이 검사합니다. 프로토타입 체인에는 객체를 정의할 대 사용하는 상속 패턴에 대한 정보가 담겨 있습니다.
- 특정 타입을 구별할 때 instanceof Object를 사용하면 무슨 타입인지 알 수 없습니다.
- 자바스크립트에서 사용자 정의 타입을 구분할 때는 instnaceof 연산자를 사용하는 것이 가장 좋으면서도 유일한 방법입니다. 이 방법은 자바스크립트의 내장 타입을 구분할 때도 사용하면 좋습니다.
- 해당 프레임에서 생성된 인스턴스가 아니라면 false를 반홥나디. 이 문제는 사용자 정의 타입과 function, array에서 발생하기 때문에 이 두 타입에는 instnaceof 연산자를 아예 쓰지 않는 편이 좋습니다.

## 함수 알아내기

- 자바스크립트에서 함수는 참조 타입으로 Function이라는 생성자가 존재하고 모든 함수는 Function의 인스턴스 입니다.
- 그러나 프레임은 프레임마다 Function 생성자를 따로 가지고 있어 프레임 간에 객체를 전달 할 때는 instanceof를 사용할 수 없습니다.
- 다행히도 typeof 연산자를 함수에 사용하면 function이란 문자열을 반환하므로 함수인지 확인할 때는 typeof 연산자를 사용하면 됩니다.
- IE8 이하에서는 typeof를 사용할 경우 function이 아닌 object 입니다.

```javascript
// IE8 이하
if ("querySelectorAll" in document) {
  images = document.querySelectorAll("img");
}
```

## 배열 알아내기

- 프레임 간 배열을 전달할 때 instanceof Array를 사용하면 결과 값이 잘못 나옵니다.
- 더글라스 크락포드는 덕 타이핑(Duck Typing)을 권장했는데, 이는 sort() 메소드가 있는지만 확인하는 방법입니다.
  - 이 방법은 sort() 메소드가 있는 객체는 배열이 유일하다는 점에서 착안 했습니다.
- Kangax는 주어진 값에서 네이티브 toString() 메서드를 호출하면 모든 브라우저에서 표준 문자열을 반환한다는 사실을 알아냈습니다. 배열에는 [object Array]라는 문자열이 넘어오는데 이 방법은 배열이 어느 프레임에서 생성됐는지에 상관없이 동작합니다.
- ECMAScript5에서는 Array.isArray()가 공식적으로 자바스크립트에 추가됐습니다.

## 프로퍼티 알아내기

- 객체에 프로퍼티가 있는지 확인할 때 보통 null이나 undefined를 자주 사용합니다.
- 프로퍼티가 존재하는지 확인할 때는 in 연산자를 사용하는 것이 가장 좋습니다.
- in 연산자는 프로퍼티 값은 확인하지 않고 프로퍼티가 존재하는지만 검사해서 버그는 발생하지 않습니다.
- in 연산자는 인스턴스에 존재하는 프로퍼티인지, 아니면 객체 프로토타입에서 상속받은 프로퍼티인지 여부는 따지지 않고 프로퍼티가 존재하면 true를 반환 합니다.
- 상속 받은 프로퍼티를 제외하고 객체 인스턴스에 프로퍼티가 있는지 검사하려면 hanOwnProperty() 메서드를 사용합니다. Object를 상속받은 모든 자바스크립트 객체는 hasOwnProperty() 메서드를 가지고 있습니다. 이 메서드는 인스턴스에 존재하는 프로퍼티만 true를 반환하고 프로토타입에 존재하는 프로퍼티는 false를 반환합니다. IE8 이하에는 존재하지 않습니다.
