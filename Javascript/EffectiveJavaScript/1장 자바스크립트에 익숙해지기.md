# 1장 자바스크립트에 익숙해지기

## 아이템 1. 어떤 자바스크립트를 사용하고 있는지 알아야 한다.

- 자바스크립트는 원래 인터렉티브한 웹페이지를 프로그래밍하기 위해 자바의 보충재로써 자리를 잡으려 했으나, 지금은 ㅂ자바를 밀어내고 웹에서 지배적인 프로그래밍 언어가 되었다.
- 자바스크립트의 인기로 인해 1997년에는 ECMAScript라는 이름으로 전세계적인 표준으로 공식화 되었다.
- 1999년에 세 번째 버전의 ECMAScript 표준이 발표 되었다.
- 2009년에는 ES5(ECMAScript5)가 발표 되었다. ES5는 새로운 기능을 추가했을 뿐만 아니라 이미 널리 사용되고 있지만 구체화되지 않은 기능들을 표준화 하기도 했다.
- 자바스크립트의 오랜 역사와 다양한 구현체들 때문에 어떤 기능이 어느 플랫폼에서 사용가능한지 추적하기는 어렵다.
- 웹브라우저는 개발자가 작성한 코드를 실행하기 위해 어떤 버전의 자바스크립트를 사용할 수 있는지 제어할 방법을 제공하지 않는다.
- 게다가 최종 사용자가 다른 버전 혹은 다른 웹 브라우저를 사용할 수도 있기 때문에 웹 프로그램은 모든 브라우저에서 지속적으로 동작할 수 있도록 주의해서 작성되어야 한다.
- ES5에서는 다른 버전에 대한 대안으로 스트릭트(strict) 모드가 새로 추가되었다. 이 기능은 옵션을 총해 적용할 수 있는데, 특정 버전의 자바스크립트에서는 오류를 일으키기 쉽거나 문제를 일으킬 만한 기능들을 사용할 수 없게 만들 수 있다. 또한 문법의 하위 호환성이 유지되어, 스트릭트 모드 확인을 구현하지 않은 환경에서도 엄격한(스트릭트 모드의) 코드를 실행할 수 있게 했다. 스트릭트 모든느 프로그램의 맨 처음 부분에 다음과 같은 특별한 고정 문자열을 추가하면 활성화 된다. 'use strict'
- 문자 리터럴을 명령어로 사용하는 문법이 약간 이상하게 보이지만, 이는 하위 호환성에 이점을 가진다. 문자 리터럴을 평가하는 것은 아무런 부작용이 없으므로 ES3 엔진은 이 명령어를 아무런 해가 없는 표현으로 실행 시킨다. 하지만 오래된 엔진은 스트릭트 모드에 대한 어떠한 확인도 하지 않을 것이다.

### 스트릭 모드와 일반 모드의 파일을 절대 병합하지 마라.

### 즉시 실행되는 함수 표현식을 사용해 파일들의 본문을 감싸라.

### 어떤 모드에 있건 동일ㅇ하게 동작하도록 코드를 작성하라.

### 기억할 점

- 애플리케이션이 지원할 자바스크립트의 버전을 정하라.
- 애플리케이션이 동작하게 될 모든 환경에서 여러분이 사용한 모든 자바스크립트의 기능이 지원되어야 한다.
- 항상 스트릭트 모드 확인을 수행하는 최신 브라우저 환경에서 스트릭트 코드를 테스트하라.
- 스트릭트 모드 지원에 대한 기대가 서로 다른 스크립트들을 병합할 때는 주의해야 한다.

## 아이템 2. 자바스크립트의 부동 소수점 숫자 이해하기

- 정수형이나 부동 소수점 숫자를 단순히 숫자형으로 분류한다.
- 자바스크립트 내의 모든 숫자는 IEEE 754 표준에서 정의한 64비트로 인코딩된 배정밀도의(double-precision) 부동 소수점, 즉 흔히 'double'로 알려진 숫자이다.
- double은 53비트까지의 정확도로 완벽하게 integer로 표현할 수 있다. 따라서 자바스크립에서 integer 연산은 별도의 integer형 없이도 완벽하게 가능하다.
- 대부분의 산술 연산자는 정수형이나 실수 또는 이 둘의 조합으로 동작한다. 하지만 비트단위 연산은 인자들이 직접 부동 소수점 숫자처럼 처하지 않고, 암묵적으로 31비트 정수로 변환한다(정확하게 말하자면 32비트, big-endian, 2의 보수로 처리된다)
- 부동 소수점 숫자는 결국 골치 아픈 존재라고 경고한다. 부동 소수점 숫자는 친근해 보이지만, 부적확하기로 악명이 높다. 부동 소수점 산술 연산은 근사 값만을 만들어 낼 수 있고 가장 가까운 표현가능한 실수로 반올림한다. 계산을 계속 수행하다 보면 이런 반올림 오류가 누적되어 더욱 더 부정확한 결과를 낳게 된다.
- 부동 소숫점의 정확도와 성능은 서로 상충관계다. 정확도가 관건이라면 이런 한계는 반드시 알아두어야 한다.
- 한가지 유용한 대안은 가능한 정수 값을 사용하는 것이다.

### 기억할 점

- 자바스크립트의 숫자는 double-정확도의 부동 소수점 숫자다.
- 자바스크립트의 정수는 별개의 데이터형이 아니라 double의 부분집합이다.
- 비트단위 연산자는 숫자를 32비트의 부호가 있는 integer처럼 처리한다.
- 부동 소수점 산술 연산의 정확도에 한계가 있음을 주의해야 한다.

## 아이템 3. 암묵적인 형변환을 주의하라.

- 자바스크립트는 데이터형 오류에 놀라울 정도로 관대하다.
- NaN 값을 테스트하기 어렵다.
  - 자바스크립트는 IEEE 부동 소수점 표준에 정의된 이상한 요구사항을 따라 NaN 자신을 동등하지 않다고 처리한다.
  - NaN이 이미 값이 숫자인지 알고 있을 경우에는 isNaN으로 NaN을 테스트 할 수 있다. 하지만 NaN으로 강제 형변환 할 수 있는 값들은, 실제로 NaN이 아니라면 isNaN으로 구별할 수 없다.
  - NaN을 테스트하기 위한 간결하고 신뢰할 만한 코딩 관계는 자기 자신과 동일함을 확인하여 테스트할 수 있다.
- 자바스크립트에서 false로 처리되는 값 일곱 가지
  - false
  - 0
  - -0
  - ""
  - NaN
  - null
  - undefined

### 기억할 점

- 데이터형 에러는 암묵적인 강제 형변환에 의해 은밀하게 감춰질 수 있다.
- \+ 연산자는 인자의 데이터형에 따라 덧셈이나 문자열 병합으로 오버로딩 된다.
- 객체는 valueOf를 통해 숫자형으로, toString을 통해 문자열로 강제 변형된다.
- vlaueOf 메소드를 가지는 객체는 반드시 valueOf에 의해 생성되는 숫자 값의 문자열 표현을 생성하는 toString 메서드를 구현해야 햔다.
- undefined 값을 테스트 할 때 트루시니스를 사용하기보다는 typeof를 사용하거나 undefined와 비교하는 것이 좋다.

## 아이템 4. 객체 래퍼보다 원시 데이터형을 우선시 하라

- 자바스크립트의 다섯 가지 원시 데이터형 값
  - 불리언
  - 숫자
  - 문자열
  - null
  - undefined
  - 헷갈리게도, typeof 연산자는 null의 데이터형을 object로 반환하지만, ECMAScript 표준은 null을 별도의 데이터 형으로 기술한다.
- 어떤 면에서, String 객체는 그 자신이 감싼 문자열 값과 비슷하게 동작한다. 하지만 원시 데이터형 문자열과 다르게, String 객체는 진짜 객체다.
- 이 차이점은 매우 중요하다. 두 개의 서로 다른 String 객체를 내장 연산자를 사용해 비교할 수 없다는 의미이기 때문이다.
- String 객체는 개별 객체이기 때문에 자기자신과만 동일하다. 엄격하지 않은 동일 비교 연산자도 만찬가지 결과다.

### 기억한 점

- 원시 데이터형을 위한 객체 래퍼는 그 자신의 원시 데이터 값과는 동작이 다르다. 동일한지 비교했을 때도 서로 다르다.
- 원시 데이터형에 프로퍼티를 설정하거나 가져오면 암묵적으로 객체 래퍼를 생성한다.

## 아이템 5. 혼합된 데이터형을 ==로 비교하지 마라

### 기억할 점

- == 연산자는 인자들이 서로 다른 데이터형일 때, 일련의 혼동스러운 암묵적인 강제 형변환을 적용시킨다.
- 비교가 어떠한 암묵적인 형변환과도 연관이 없다는 사실을 코드를 읽는 사람에게 명확하게 전달하기 위해서 ===를 사용하라.
- 비교할 값이 서로 다른 데이터형이라면 프로그램의 동작을 더 명백히 하기 위해 직접 명시적인 강제 형변환을 사용하라.

## 아이템 6. 세미콜론 삽입의 한계에 대해서 알아두자

- 세미콜로은 한 줄 이사으이 새로운 행이나, 프로그램의 입력의 마지막이나 '}' 토큰전에만 삽입된다.
  - 다르게 말하면, 세미콜론은 줄의 마지막 부분, 블로그이 마지막 부분, 또는 프로그램의 마지막 부분에서만 생략 가능하다.
- 세미콜론은 다음 입력 토큰을 파싱할 수 없을 때에만 삽입된다.
  - 다섯 개의 문자('(', '[', '+', '-', '/'를 조심해야 한다)
- 세미콜론은 for 반복문의 구분자나 빈 선언문으로 절대 삽입되지 않는다.

### 기억할 점

- 세미콜로은 '}' 앞이나 줄의 마지막 또는 프로그램의 마지막 전에만 추론되어 삽입된다.
- 세미콜론은 다음 토근이 파싱될 수 없을 때에만 추론되어 삽입된다.
- 선언문이 '(', '[', '+', '-', '/'으로 시작할 때는 절대 세미콜론을 생략하면 안 된다.
- 스크립트를 병합할 때, 스크립트들 사이에 명시적으로 세미콜론을 삽입하라.
- return, throw, break, continue, ++, -- 바로 뒤에 새로운 행을 입력하지 마라.
- for 반복문의 머리 부분에서는 세미콜론이 구분자 또는 빈 선언문으로도 절대 추론 되어 삽입되지 않는다.

## 아이템 7. 문자열을 16비트 코드 단위의 시퀀스로 간주하라

### 기억할 점

- 자바스크립트 문자열은 유니코드 코드 포인트가 아니라 16비트 코드 유닛으로 구성된다.
- 자바스크립트에서 유니코드 코드 포인트 2^16 이상은 대리 쌍이라고 알려진 두 개의 코드 유닛으로 표현된다.
- 대리 쌍은 문자열 요소의 개수를 반환하고, length, charAt, charCodeAt, 메서드와 "." 같은 정규 표현식 패턴에 영향을 미친다.
- 코드 포인트를 다루는 문자열 조작을 하기 위해서는 서드파티 라이브러리를 사용하라.
- 문자열을 처리하는 라이브러리를 사용할 때 코드 포인트의 전체 범위를 어떻게 처리 하는지 해당 라이브러리의 문서를 찾아보아야 한다.
