
# 3계층형
구성요소 : 웹 서버, AP 서버, DB서버  

## 주요 개념과 설명
프로세스, 스레드, 커널  

### 프로세스와 스레드
프로세스 및 스레드는 실행 파일 자체가 아니라 OS 상에서 실행돼서 어느 정도 독립성을 가지고 동작하는 것이다.  
프로세스 및 스레드가 활동하려면 메모리 공간이 필요하다.  
이것은 커널에 의해 메모리 상에 확보된다.  
다양한 처리를 하면서 데이터를 주고받기 위해 이 공간을 사용한다.  

||프로세스|스레드|
|-|-----|----|
|장점|개별 처리 독립성이 높다|생성 시 부하가 낮다|
|단점|생성 시 CPU 부하가 높다|메모리 공간을 공유하기 때문에 의도하지 않은 데이터 읽기/쓰기가 발생할 수 있다|
> 프로세스가 메모리 공간을 공유 할 수 없는 것은 아니다.  

### OS 커널
OS에서 커널은 심장이자 뇌이며 척수다.  
커널이 OS의 본질이며 나머지는 덤이라고 해도 과언이 아니다.  
커널 자체가 OS의 인프라라고 생각하면 된다.  
커널이 존재하기 때문에 개발자가 하드웨어나 다른 애플리케이션에 영향을 의식하지 않고 애플리케이션을 만들 수 있다.  

OS 처리는 원칙적으로는 커널을 통해 이루어진다.  
커널의 역할에는 여러가지가 있다
- 시스텀 콜 인터페이스
- 프로세스 관리  
- 메모리 관리  
- 네트워크 스택  
- 파일 시스템 관리  
- 장치 드라이버  

#### 시스텀 콜 인터페이스 
프로세스/스레드에서 커널로 연결되는 인터페이스다.  
애플리케이션에서 OS를 통해서 어떤 처리를 하고 싶으면 시스템 콜이라고 하는 명령을 이용해서 커널에 명령을 내린다.  
이때 명령이 인터페이스를 통해서 전달된다.  

디스크 액세스와 네트워크 요청 모두 프로세스 관점에서 커널에 대한 시스템 콜이다.   

#### 프로세스 관리 
프로세스를 관리한다.  
OS 상에서 프로세스를 많이 가동할 수 있다.  
이에 비해 물리 서버의 CPU 코어 수는 많아야 수십 개 정도 밖에 안 된다.  
언제, 어떤 프로세스가 어느 정도의 CPU 코어를 이용할 수 있는지, 처리 우선순위를 어떻게 결정할 것인지 등을 관리하는 것이 이 기능의 역할이다.  

#### 메모리 관리 
메모리 영역을 관리한다.  
물리 메모리 공간의 최대치를 고려한다.  
프로세스가 이용하는 독립 메모리 공간을 확보하거나 상호 간의 참조 영역을 지키기 위해 독립성을 관리하는 등의 메모리 관리 역할을 한다.  
이 기능이 없으면 각 프로세스는 자신 이외의 프로세스가 사용하는 메모리 영역 범위를 파악해야 하므로 해당 하드웨어의 신이 아닌 이상 애플리케이션 개발이 매우 어렵다.  

#### 네트워크 스택
TODO

#### 파일 시스템 관리
파일 시스템용 인터페이스를 제공한다.  
파일 시스템은 OS 기능의 하나로서 물리 디스크에 제공된 데이터를 관리하는 기능이다.  
주요 관리 기능으로는 디렉터리(폴더) 구조 제공, 액세스 관리, 고속화, 안정성 향상 등이 있다.  

#### 장치 드라이버
디스크나 NIC 등의 물리 장치용 인터페이스를 제공한다.  
각 장치 제조사가 OS에 대응하는 장치 드라이버를 제공해서 해당 OS의 펴준 장치로서 커널을 경유해 이용할 수 있게 하는 것이다.  

### 커널의 역할이 많이 있지만, 중요한 것은 뒤에서 이루어지고 있는 처리는 은폐하고 편리한 인터페이스를 제공한다는 사실이다.  

#### 커널은 결코 견고하지 않다
커널 설계 및 구현 방식에는 모놀로식(monolithic)커널과 마이크로(micro)커널이 있다.  
모놀로식은 단일형을 가리키고, 마이크로는 작다는 의미이다.  

모놀로식 커널은 OS의 주요 구성 요소를 모두 하나의 메모리 공간을 통해 제공한다.(유닉스 계열의 OS나 리눅스)  

마이크로 커널에서는 최소한의 기능만 커널이 제공하고 그 외 기능은 커널 밖에서 제공한다.(Mas OS X)  

양쪽 다 장단점이 있기 때문에 현재 대부분의 아키텍처는 양쪽의 장점을 취하고 있다.  

무엇이든 견고하기만 해서는 부족한 법이다.  

## 웹 데이터 흐름 

### 클라이언트 PC부터 웹 서버까지

#### 흐름
1. 웹 브라우저 요청을 발행한다.
1. 이름 해석을 한다.
1. 웹 서버가 요청을 접수한다.
1. 웹 서버가 정적 콘텐츠인지 동적 콘첸츠인지 판단한다. 
1. 필요한 경로로 데이터를 엑세스 한다. 

#### 웹 서버부터 AP 서버까지








---
참조 : [그림으로 공부하는 IT 인프라 구조](https://book.naver.com/bookdb/book_detail.nhn?bid=9252940)